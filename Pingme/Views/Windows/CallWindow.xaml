<Window x:Class="Pingme.Views.Windows.CallWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Cuộc gọi thoại" Height="500" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="Black"
        ResizeMode="NoResize"
        WindowStyle="None">

    <Grid Background="Black">

        <!-- Remote video -->
        <StackPanel x:Name="RemoteVideoContainer"
                    Background="Black"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Visibility="Collapsed" />

        <!-- Avatar người nhận -->
        <Image x:Name="RemoteAvatar"
               Source="/Assets/Icons/avatar-default.png"
               Width="200" Height="200"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"
               Stretch="UniformToFill"
               ClipToBounds="True"
               Visibility="Visible">
            <Image.Clip>
                <EllipseGeometry Center="100,100" RadiusX="100" RadiusY="100"/>
            </Image.Clip>
        </Image>

        <!-- Local video -->
        <Grid Width="200" Height="200"
              HorizontalAlignment="Right"
              VerticalAlignment="Bottom"
              Margin="10">
            <ContentControl x:Name="LocalVideoContainer"
                            Background="Black"
                            Visibility="Collapsed" />

            <Image x:Name="LocalAvatar"
                   Source="/Assets/Icons/avatar-default.png"
                   Stretch="UniformToFill"
                   Visibility="Visible"
                   Margin="2"
                   ClipToBounds="True">
                <Image.Clip>
                    <EllipseGeometry Center="100,100" RadiusX="100" RadiusY="100"/>
                </Image.Clip>
            </Image>
        </Grid>

        <!-- Thông báo cuộc gọi kết thúc -->
        <Border x:Name="CallStatusBanner"
                Background="#CC222222"
                CornerRadius="8"
                Padding="10"
                Margin="20"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Visibility="Collapsed">
            <TextBlock x:Name="CallStatusText"
                       Text="📞 Cuộc gọi đã kết thúc từ phía bên kia"
                       Foreground="White"
                       FontSize="16"
                       FontWeight="Bold"
                       TextAlignment="Center" />
        </Border>

        <!-- Controls -->
        <Border Background="#66000000"
                Padding="10"
                CornerRadius="30"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

                <!-- Mic toggle -->
                <ToggleButton x:Name="BtnToggleMic"
                              Width="50" Height="50"
                              Margin="0,0,15,0"
                              ToolTip="Bật/tắt micro"
                              Background="#FF333333"
                              BorderBrush="Transparent"
                              Foreground="White"
                              Click="BtnToggleMic_Click"
                              FontSize="24"
                              Content="🎤" />

                <!-- End call -->
                <Button x:Name="BtnEndCall"
                        Width="60" Height="60"
                        ToolTip="Kết thúc cuộc gọi"
                        Background="#E81123"
                        BorderBrush="Transparent"
                        Foreground="White"
                        Click="BtnEndCall_Click"
                        FontSize="28"
                        Content="✕" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
